generator client {
  provider = "prisma-client"
  output   = "./generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model user {
  id         String      @id @default(cuid())
  password   String
  firstName  String
  lastName   String
  createdAt  DateTime    @default(now())
  updatedAt  DateTime    @updatedAt
  userName   String      @unique
  animations animation[]
}

model animation {
  id          String            @id @default(cuid())
  title       String
  firstPrompt String
  isPublic    Boolean           @default(false)
  createdAt   DateTime          @default(now())
  updatedAt   DateTime          @updatedAt
  userId      String
  user        user              @relation(fields: [userId], references: [id])
  versions    animationVersion?
}

model animationVersion {
  id           String    @id @default(cuid())
  versionNo    Int       @unique
  code         String
  videoURL     String?
  prompt       String
  createdAt    DateTime  @default(now())
  status       Status    @default(PENDING)
  errorMessage String?
  animationId  String    @unique
  animation    animation @relation(fields: [animationId], references: [id])
}

enum Status {
  PENDING
  PROCESSING
  COMPLETED
  ERROR
}
